"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw","jquery.ui","myTemplate","jq.validate"],function(u,e){function r(e){var r=u("#canvas").width(),o=u("#canvas").height(),t=document.getElementById("canvas"),s=t.getContext("2d");t.width=r,t.height=o;for(var a="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),n=a.length,i=0;i<=3;i++){var l=Math.floor(Math.random()*n),c=30*Math.random()*Math.PI/180,m=a[l];e[i]=m.toLowerCase();var p=10+20*i,g=20+8*Math.random();s.font="bold 23px 微软雅黑",s.translate(p,g),s.rotate(c),s.fillStyle=d(),s.fillText(m,0,0),s.rotate(-c),s.translate(-p,-g)}for(i=0;i<=5;i++)s.strokeStyle=d(),s.beginPath(),s.moveTo(Math.random()*r,Math.random()*o),s.lineTo(Math.random()*r,Math.random()*o),s.stroke();for(i=0;i<=30;i++){s.strokeStyle=d(),s.beginPath();p=Math.random()*r,g=Math.random()*o;s.moveTo(p,g),s.lineTo(p+1,g+1),s.stroke()}}function d(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}console.log("Aaaaaa"),u(".exchange").mouseover(function(){console.log("cccccccccccc"),u(".erl_la_down_menu").css({display:"block"})}),u(".exchange").mouseout(function(){u(".erl_la_down_menu").css({display:"none"})}),u(".notic_down_solid").mouseover(function(){u(".tb_parities span").css({display:"block"})}),u(".notic_down_solid").mouseout(function(){u(".tb_parities span").css({display:"none"})}),u("#username").blur(function(){if(""==u.trim(this.value)||null==u.trim(this.value)){u("#user_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>请输入账号</p>")}else{var e=/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/.test(u.trim(this.value)),r=/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/.test(u.trim(this.value));if(console.log(e),console.log(r),e||r)console.log(e||r),u("._user").append("<span class='_true'></span>");else{u("#user_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>请输入正确的手机或者邮箱</p>")}}}),u("#username").focus(function(){u("#user_error img").remove(),u("#user_error .msg").remove(),u("._user ._true").remove()}),u("#password").blur(function(){if(""==u.trim(this.value)||null==u.trim(this.value)){u("#password_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>请输入密码</p>")}else{if(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/.test(u.trim(this.value)))u("._password").append("<span class='_true'></span>");else{u("#password_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>6-20个数字、字母或符号区分大小写</p>")}}}),u("#password").focus(function(){u("#password_error img").remove(),u("#password_error .msg").remove(),u("._password ._true").remove()}),u(function(){var e=[];r(e),u("#canvas").on("click",function(){r(e)}),u("#v_code").blur(function(){if(""==u.trim(this.value)){u("#v_code_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>请输入验证码</p>")}else{if(u.trim(this.value).toLowerCase()!=e.join("")){u("#v_code_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>验证码错误</p>")}}}),u("#v_code").focus(function(){u("#v_code_error img").remove(),u("#v_code_error .msg").remove()})}),u("#user_submit").click(function(){u.ajax({type:"get",url:"http://localhost:9999/json/users.json",success:function(e){for(var r=u.trim(u("#username").val()),o=u.trim(u("#password").val()),t=0;t<e.length;t++)if(r==e[t].phone&&o==e[t].password){localStorage.setItem("username",r),localStorage.setItem("password",o),u(location).attr("href","http://localhost:9999/pages/index/index.html");break}u(location).attr("href","http://localhost:9999/pages/login_register/login.html");u("#user_error").append("<img src='../../../img/login-register/tip.png'/><p class='msg'>用户名或密码错误</p>");for(var s=0;s<localStorage.length;s++){var a=localStorage.key(s),n=localStorage.getItem(a);a==r&&n==o&&u(location).attr("href","http://localhost:9999/pages/index/index.html")}}})})})});